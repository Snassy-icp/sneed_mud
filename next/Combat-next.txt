PROPOSED Combat & Stats System Specification
=====================================

Technical Assumptions
-------------------
1. Internet Computer Platform Constraints:
   - Update calls have 1-2 second latency (minimum)
   - Query calls should not exceed once per second frequency
   - State updates and combat actions must account for these latencies
   - All timing values in the specification must respect these technical limitations

1. Overview
-----------
A comprehensive combat system featuring character attributes, equipment effects, status conditions, and tactical decision-making. This system aims to create engaging PvP encounters while maintaining balance.

2. Character Stats
-----------------
Primary Attributes:
- Strength: Affects physical damage and carrying capacity
- Dexterity: Affects attack speed and dodge chance
- Constitution: Affects HP and physical defense
- Intelligence: Affects MP and spell damage
- Wisdom: Affects MP regeneration and spell resistance

Derived Stats:
- HP = (Base HP + Constitution * 10)
- MP = (Base MP + Intelligence * 5 + Wisdom * 3)
- Physical Attack = (Base + Strength * 2 + Weapon Damage)
- Physical Defense = (Base + Constitution + Armor Value)
- Magic Attack = (Base + Intelligence * 2)
- Magic Defense = (Base + Wisdom * 2)
- Attack Speed = (Base + Dexterity * 0.5)% 
- Dodge Chance = (Dexterity * 0.5)%
- Critical Hit Chance = (Base 5% + Dexterity * 0.2)%

3. Combat Mechanics
------------------
Initiative System:
- Combat rounds based on Attack Speed
- Higher Attack Speed allows more frequent actions
- Base round duration: 5 seconds (system-wide state evaluation interval)
- Minimum time between actions: 2.5 seconds (global cooldown for all actions)

Note: Base round duration represents the fundamental "tick" of the combat system where overall state and effects are evaluated. 
Minimum time between actions is the global cooldown that applies to ANY player action, ensuring no actions can be performed more 
frequently than the platform can handle.

Action Types:
1. Basic Attack
   - Physical damage based on Physical Attack
   - Can be dodged or critical hit
   - 2.5 second cooldown

2. Special Abilities
   - Unlocked at specific levels
   - Consume MP or other resources
   - Unique effects (stun, bleed, etc.)
   - Longer cooldowns (5-30 seconds)

3. Defensive Actions
   - Block: Reduces incoming damage by 50%, 6s cooldown
   - Dodge: Increased dodge chance for 3s, 10s cooldown
   - Counter: Return damage when hit, 12s cooldown

Status Effects:
- Bleeding: DoT physical damage
- Burning: DoT magical damage
- Stunned: Cannot take actions
- Slowed: Reduced Attack Speed
- Weakened: Reduced damage output

Combat State:
- Enters combat on attack/being attacked
- Combat state lasts 20 seconds from last action
- Leaving combat does not start HP/MP regeneration (will use a /rest command for this)
- Cannot use certain abilities out of combat
- Cannot use certain other abilities when in combat

4. Equipment & Items
-------------------
Weapon Types:
- One-handed: Balanced stats, allows shield
- Two-handed: Higher damage, no shield
- Magic: Enhances spell damage
[See Discussion Point #1 regarding Ranged Weapons]

Armor Types:
- Light: High dodge, low defense
- Medium: Balanced stats
- Heavy: High defense, lower dodge

Equipment Stats:
- Base damage/defense values
- Attribute bonuses
- Special effects
- Set bonuses

5. Experience & Progression
--------------------------
XP Gain:
- Base XP = Victim's Level * 15
- Bonus XP for higher level victims
- Group combat splits XP based on contribution

Level Formula:
- Base XP for level N = 100 * (N^2)
- This creates a curve where:
  * Level 1->2:   100 XP  (about 7 same-level kills)
  * Level 5->6:   2,500 XP
  * Level 10->11: 10,000 XP
  * Level 20->21: 40,000 XP
  * Level 30->31: 90,000 XP
  * Level 50->51: 250,000 XP

Total XP to reach level N = 100 * (N * (N-1) / 2)

Progression Pacing:
- Early levels (1-10): Quick progression, ~1-2 hours per level
- Mid levels (11-30): Moderate progression, ~2-4 hours per level
- High levels (31-50): Slower progression, ~4-8 hours per level
- Level 50 is current cap

Level Benefits:
- Attribute points: 3 per level
- New abilities every 5 levels
- Increased base stats
- Equipment requirements

6. Death & Respawn
-----------------
Death Mechanics:
- Die at 0 HP
- 50% XP penalty for next 30 minutes
- Will not lose any items or money
- Cannot be attacked while dead

Respawn Options:
- Manual respawn becomes available 60 seconds after death
- Respawn always occurs in starting room (room 0)
- Full HP/MP restored on respawn

7. Constants & Formulas
----------------------
Combat Timings:
- Base Round: 5 seconds
- Combat Duration: 20 seconds
- Global Cooldown: 2.5 seconds

Damage Formula:
Physical Damage = (Attack * (100 / (100 + Defense))) * (1 + Critical)
Magical Damage = (Magic Attack * (100 / (100 + Magic Defense)))

8. Edge Cases & Restrictions
--------------------------
- Maximum attribute values: 100 per stat
- Dodge/Crit cap: 75%
- Cannot attack while trading/banking
- PvP level restrictions (Â±5 levels)
- Anti-camping mechanics
- Diminishing returns on crowd control

Discussion Points
---------------
#1 - Ranged Weapons
Currently specified as: "Ranged: Distance attacks, lower defense"
Issue: May not be suitable for room-based combat system
Options:
1. Remove ranged weapons entirely
2. Redefine as special combat style (first strike, kiting)
3. TBD based on discussion
Status: Under review

#2 - Level Cap and End-game Progression
Currently specified as: Level 50 cap with quadratic XP scaling
Issue: Need to determine if this provides enough content and proper pacing
Options:
1. Keep current cap but add prestige system
2. Extend to higher cap with adjusted curve
3. Add alternate progression systems at cap
Status: Under review

Note: This is a draft proposal for discussion and refinement. All values and mechanics are subject to adjustment based on feedback and testing. 